<!DOCTYPE html>
<html>
<head>
  <title>Share Your Location</title>
</head>
<body>
  <h2>Share Your Location</h2>
  <button onclick="getLocation()">Allow Location</button>
  <p id="status"></p>

  <script>
    function getLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition, showError);
      } else {
        document.getElementById("status").innerHTML = "Geolocation not supported.";
      }
    }

   function showPosition(position) {
  const lat = position.coords.latitude;
  const lon = position.coords.longitude;

  document.getElementById("status").innerHTML =
    "Latitude: " + lat + "<br>Longitude: " + lon;

  // send location to Google Sheets
  fetch("https://script.google.com/macros/s/AKfycbzHpUlbRfUKh6PLCgpcG38L3k3kl-vpW23Yl3fZ4pprOgLkJ2WncRXWZXp6w51hJSH6tg/exec", {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify({latitude: lat, longitude: lon})
  }).then(response => response.text())
  .then(data => console.log("Success:", data))
  .catch(error => console.error("Error:", error));;
}


    function showError(error) {
      switch(error.code) {
        case error.PERMISSION_DENIED:
          document.getElementById("status").innerHTML = "User denied location request.";
          break;
        case error.POSITION_UNAVAILABLE:
          document.getElementById("status").innerHTML = "Location unavailable.";
          break;
        case error.TIMEOUT:
          document.getElementById("status").innerHTML = "Request timed out.";
          break;
        default:
          document.getElementById("status").innerHTML = "Unknown error.";
      }
    }
  </script>
</body>
</html>
